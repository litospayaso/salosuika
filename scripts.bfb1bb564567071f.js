const fruitTypes=[{emoji:"\u{1f352}",baseRadius:30,points:1,color:"#551910",name:"cherry"},{emoji:"\u{1f353}",baseRadius:36,points:3,color:"#5a1a11",name:"strawberry"},{emoji:"\u{1f347}",baseRadius:50,points:6,color:"#2c1a28",name:"grape"},{emoji:"\u{1f34a}",baseRadius:64,points:10,color:"#c3450b",name:"orange"},{emoji:"\u{1f34e}",baseRadius:70,points:15,color:"#7c1c00",name:"apple"},{emoji:"\u{1f350}",baseRadius:76,points:21,color:"#18270c",name:"pear"},{emoji:"\u{1f351}",baseRadius:84,points:28,color:"#18270c",name:"peach"},{emoji:"\u{1f34d}",baseRadius:90,points:36,color:"#412614",name:"pinnapple"},{emoji:"\u{1f348}",baseRadius:102,points:45,color:"#344012",name:"melon"},{emoji:"\u{1f349}",baseRadius:120,points:55,color:"#032109",name:"watermelon"},{emoji:"\u{1f95d}",baseRadius:135,points:70,color:"#2d1105",name:"kiwi"},{emoji:"\u{1f34b}",baseRadius:160,points:90,color:"#6b4a0f",name:"lemon"},{emoji:"\u{1f951}",baseRadius:200,points:120,color:"#1a3307",name:"avocado"}];class SuikaGame{constructor(){this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d"),this.setupCanvas(),this.fruits=[],this.currentFruit=null,this.nextFruitType=0,this.score=0,this.highScore=localStorage.getItem("suikaHighScore")||0,this.gamesPlayed=Number(localStorage.getItem("gamesPlayed"))||0,this.fruitsDiscovered=Number(localStorage.getItem("fruitsDiscovered"))||4,this.gameOver=!1,this.dropPosition=0,this.gravity=.3,this.friction=.95,this.restitution=.4,this.allowDrop=!0,this.hammerMode=!1,this.hammerUses=3+Math.floor(this.gamesPlayed/2),this.fruitTypes=fruitTypes,this.fruitImages={},this.imagesLoaded=0,this.totalImages=this.fruitTypes.length,this.loadFruitImages(),this.updateDiscoveredFruits(),this.achievementsCounter=localStorage.getItem("achievementsCounter")?JSON.parse(localStorage.getItem("achievementsCounter")):{used:0,cherry:0,orange:0,peach:0,pinnapple:0,melon:0,lemon:0},this.achievements=localStorage.getItem("achievements")?JSON.parse(localStorage.getItem("achievements")):[],this.achievements.length>=24&&!this.achievements.includes(25)&&this.addNewAchievement(25),this.hammerUses>=5&&!this.achievements.includes(21)&&this.addNewAchievement(21),this.hammerUses>=15&&!this.achievements.includes(22)&&this.addNewAchievement(22),this.hammerUses>=20&&!this.achievements.includes(23)&&this.addNewAchievement(23),this.hammerUses>=25&&!this.achievements.includes(24)&&this.addNewAchievement(24),this.init()}loadFruitImages(){this.fruitTypes.forEach((e,t)=>{const s=new Image;s.onload=()=>{this.imagesLoaded++,this.imagesLoaded===this.totalImages&&console.log("All fruit images loaded!")},s.onerror=()=>{console.warn(`Failed to load image for ${e.name}`),this.imagesLoaded++},s.src=`assets/${e.name}.png`,this.fruitImages[t]=s})}setupCanvas(){const t=this.canvas.parentElement.getBoundingClientRect(),s=t.width-40,i=t.height-80;let n=s,a=3*s/2;a>i&&(a=i,n=2*i/3),this.canvas.width=n,this.canvas.height=a,this.canvas.style.width=n+"px",this.canvas.style.height=a+"px",this.scaleFactor=Math.min(n/400,a/600),this.dropPosition=this.canvas.width/2,fruitTypes.forEach(o=>{o.radius=Math.max(8,o.baseRadius*this.scaleFactor)}),window.addEventListener("resize",()=>{})}handleResize(){const e=this.canvas.width,t=this.canvas.height;this.setupCanvas();const s=this.canvas.width/e,i=this.canvas.height/t;this.fruits.forEach(n=>{n.x*=s,n.y*=i,n.radius=this.fruitTypes[n.type].radius}),this.currentFruit&&(this.currentFruit.x*=s,this.currentFruit.y*=i,this.currentFruit.radius=this.fruitTypes[this.currentFruit.type].radius),this.dropPosition*=s}init(){this.updateHighScore(),this.generateNextFruit(),this.setupEventListeners(),this.gameLoop(),this.setupAudio()}setupAudio(){document.getElementById("bgMusic");try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.createAmbientSound()}catch{console.log("Web Audio not supported")}}createAmbientSound(){const e=void 0===localStorage.getItem("backgroundMusic")||"true"===localStorage.getItem("backgroundMusic"),t=document.createElement("audio");t.setAttribute("src","assets/music/background.mp3"),e&&t.setAttribute("autoplay","autoplay"),t.setAttribute("loop","loop"),t.setAttribute("id","backgroundMusic"),document.querySelector("body").append(t),t.Play()}setupEventListeners(){this.canvas.addEventListener("mousemove",e=>{if(!this.gameOver){const t=this.canvas.getBoundingClientRect();this.dropPosition=Math.max(30,Math.min(this.canvas.width-30,e.clientX-t.left)),this.updatePreview()}}),this.canvas.addEventListener("click",()=>{!this.gameOver&&!this.hammerMode&&this.dropFruit()}),this.canvas.addEventListener("click",e=>{if(e.preventDefault(),!this.gameOver&&this.hammerMode){const t=this.canvas.getBoundingClientRect();this.destroyFruitAt(e.clientX-t.left,e.clientY-t.top)}}),this.canvas.addEventListener("touchmove",e=>{if(e.preventDefault(),!this.gameOver){const t=this.canvas.getBoundingClientRect();this.dropPosition=Math.max(30,Math.min(this.canvas.width-30,e.touches[0].clientX-t.left)),this.updatePreview()}}),document.getElementById("restartBtn").addEventListener("click",()=>{this.restart()}),document.getElementById("playAgainBtn").addEventListener("click",()=>{this.hideGameOverModal(),this.restart()}),document.getElementById("hammerBtn").addEventListener("click",()=>{this.toggleHammerMode()})}generateNextFruit(){this.nextFruitType=Math.floor(4*Math.random()),this.updatePreview()}updatePreview(){const e=document.getElementById("previewFruit");e.setAttribute("fruit",fruitTypes[this.nextFruitType].name);const s=Number(document.querySelector("canvas").getAttribute("width"));let i=(Number(window.innerWidth)-s)/2;window.innerWidth>768&&(i-=230),e.style.left=`${this.dropPosition+i}px`,this.updateHammerButton()}toggleHammerMode(){if(this.hammerUses<=0)return;this.hammerMode=!this.hammerMode;const e=document.getElementById("hammerBtn"),t=document.getElementById("gameCanvas");this.hammerMode?(e.classList.add("active"),e.textContent=`\u21a9\ufe0f (${this.hammerUses})`,t.classList.add("hammer-mode")):(e.classList.remove("active"),e.textContent=`\u{1f528} (${this.hammerUses})`,t.classList.remove("hammer-mode"))}destroyFruitAt(e,t){for(let s=this.fruits.length-1;s>=0;s--){const i=this.fruits[s],n=e-i.x,a=t-i.y;if(Math.sqrt(n*n+a*a)<=i.radius){this.createDestructionParticles(e,t,i.color);const r=fruitTypes[i.type];this.achievementsCounter[r.name]=this.achievementsCounter[r.name]?this.achievementsCounter[r.name]+1:1,this.achievementsCounter.used=this.achievementsCounter.used?this.achievementsCounter.used+1:1,this.updateHammerAchievents(),this.playDestructionSound(),this.fruits.splice(s,1),this.hammerUses--,this.toggleHammerMode(),this.updateHammerButton(),window.setAchievementList();break}}}updateHammerAchievents(){localStorage.setItem("achievementsCounter",JSON.stringify(this.achievementsCounter)),this.achievementsCounter.used>=5&&!this.achievements.includes(11)&&this.addNewAchievement(11),this.achievementsCounter.used>=15&&!this.achievements.includes(12)&&this.addNewAchievement(12),this.achievementsCounter.used>=25&&!this.achievements.includes(13)&&this.addNewAchievement(13),this.achievementsCounter.used>=50&&!this.achievements.includes(14)&&this.addNewAchievement(14),this.achievementsCounter.cherry>=25&&!this.achievements.includes(15)&&this.addNewAchievement(15),this.achievementsCounter.orange>=15&&!this.achievements.includes(16)&&this.addNewAchievement(16),this.achievementsCounter.peach>=7&&!this.achievements.includes(17)&&this.addNewAchievement(17),this.achievementsCounter.pinnapple>=5&&!this.achievements.includes(18)&&this.addNewAchievement(18),this.achievementsCounter.melon>=3&&!this.achievements.includes(19)&&this.addNewAchievement(19),this.achievementsCounter.lemon>=1&&!this.achievements.includes(20)&&this.addNewAchievement(20)}createDestructionParticles(e,t,s){for(let i=0;i<64;i++){const n=document.createElement("div");n.className="destruction-particle",n.style.left=window.innerWidth/2+"px",n.style.top=`${t+75}px`,n.style.background=s;const a=2*Math.PI*i/64,o=30+30*Math.random();n.style.setProperty("--vx",Math.cos(a)*o+"px"),n.style.setProperty("--vy",Math.sin(a)*o+"px"),document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},1500)}}updateHammerButton(){const e=document.getElementById("hammerBtn");this.hammerUses<=0?(e.disabled=!0,e.textContent="\u274c",e.classList.add("disabled"),this.hammerMode&&(this.hammerMode=!1,document.getElementById("gameCanvas").classList.remove("hammer-mode"),e.classList.remove("active"))):(e.disabled=!1,e.classList.remove("disabled"),e.textContent=this.hammerMode?`\u21a9\ufe0f (${this.hammerUses})`:`\u{1f528} (${this.hammerUses})`)}playDestructionSound(){if(soundEffetctsState=void 0===localStorage.getItem("soundEffects")||"true"===localStorage.getItem("soundEffects"),this.audioContext&&soundEffetctsState){const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.connect(t),t.connect(this.audioContext.destination),e.frequency.setValueAtTime(200,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(50,this.audioContext.currentTime+.3),t.gain.setValueAtTime(.15,this.audioContext.currentTime),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.type="sawtooth",e.start(),e.stop(this.audioContext.currentTime+.3)}}dropFruit(){if(this.allowDrop){this.allowDrop=!1;const e=this.fruitTypes[this.nextFruitType];this.currentFruit={x:this.dropPosition,y:e.radius,vx:0,vy:0,radius:e.radius,type:this.nextFruitType,color:e.color,emoji:e.emoji,isDropping:!0},this.generateNextFruit(),this.fruits.push(this.currentFruit),setTimeout(()=>{this.allowDrop=!0,this.currentFruit&&(this.currentFruit=null)},700)}}updatePhysics(){this.fruits.forEach(e=>{e.vy+=this.gravity,e.x+=e.vx,e.y+=e.vy,e.vx*=this.friction,e.vy*=this.friction,this.fruits.forEach(t=>{if(e!==t){const s=e.x-t.x,i=e.y-t.y;Math.sqrt(s*s+i*i)<e.radius+t.radius+5&&(e.vx*=.92,e.vy*=.92)}}),e.y+e.radius>this.canvas.height&&(e.y=this.canvas.height-e.radius,e.vy*=-this.restitution,Math.abs(e.vy)<1&&(e.vy=0)),e.x-e.radius<0&&(e.x=e.radius,e.vx*=-this.restitution),e.x+e.radius>this.canvas.width&&(e.x=this.canvas.width-e.radius,e.vx*=-this.restitution),e.y<50?(e.dangerTime=(e.dangerTime||0)+1,e.dangerTime>180&&this.triggerGameOver()):e.dangerTime=0}),this.checkCollisions()}checkCollisions(){for(let e=0;e<this.fruits.length;e++)for(let t=e+1;t<this.fruits.length;t++){const s=this.fruits[e],i=this.fruits[t],n=s.x-i.x,a=s.y-i.y,o=Math.sqrt(n*n+a*a),r=s.radius+i.radius;if(o<r){if(s.type===i.type&&s.type<this.fruitTypes.length-1)return void this.mergeFruits(s,i,e,t);this.handleCollision(s,i,n,a,o,r)}}}mergeFruits(e,t,s,i){const n=(e.x+t.x)/2,a=(e.y+t.y)/2,o=e.type+1,r=this.fruitTypes[o];o+1>this.fruitsDiscovered&&(this.fruitsDiscovered=o+1,localStorage.setItem("fruitsDiscovered",this.fruitsDiscovered),this.fruitsDiscovered>=5&&!this.achievements.includes(6)&&this.addNewAchievement(6),this.fruitsDiscovered>=7&&!this.achievements.includes(7)&&this.addNewAchievement(7),this.fruitsDiscovered>=9&&!this.achievements.includes(8)&&this.addNewAchievement(8),this.fruitsDiscovered>=12&&!this.achievements.includes(9)&&this.addNewAchievement(9),13==this.fruitsDiscovered&&!this.achievements.includes(10)&&this.addNewAchievement(10),this.updateDiscoveredFruits());const h={x:n,y:a,vx:0,vy:-2,radius:r.radius,type:o,color:r.color,emoji:r.emoji,isNew:!0};this.score+=10*r.points,this.updateScore(),this.createParticles(n,a,e.color),this.fruits.splice(Math.max(s,i),1),this.fruits.splice(Math.min(s,i),1),this.fruits.push(h),this.playMergeSound()}handleCollision(e,t,s,i,n,a){const o=a-n,r=s/n*o*.5,h=i/n*o*.5;e.x+=r,e.y+=h,t.x-=r,t.y-=h;const m=s/n,l=i/n,u=(e.vx-t.vx)*m+(e.vy-t.vy)*l;if(u>0)return;const d=2*u/2;e.vx-=d*m*this.restitution,e.vy-=d*l*this.restitution,t.vx+=d*m*this.restitution,t.vy+=d*l*this.restitution}createParticles(e,t,s){for(let i=0;i<64;i++){const n=document.createElement("div");n.className="particle",n.style.left=window.innerWidth/2+100*(Math.random()-.65)+"px",n.style.top=`${t+75+100*(Math.random()-.65)}px`,n.style.background=s;const a=2*Math.PI*i/24,o=20+20*Math.random();n.style.setProperty("--vx",Math.cos(a)*o+"px"),n.style.setProperty("--vy",Math.sin(a)*o+"px"),setTimeout(()=>{document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},1e3)},500*Math.random())}}playMergeSound(){const e=void 0===localStorage.getItem("soundEffects")||"true"===localStorage.getItem("soundEffects");if(this.audioContext&&e){const t=this.audioContext.createOscillator(),s=this.audioContext.createGain();t.connect(s),s.connect(this.audioContext.destination),t.frequency.setValueAtTime(800,this.audioContext.currentTime),t.frequency.exponentialRampToValueAtTime(400,this.audioContext.currentTime+.2),s.gain.setValueAtTime(.1,this.audioContext.currentTime),s.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.2),t.type="sine",t.start(),t.stop(this.audioContext.currentTime+.2)}}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.fruits.forEach(e=>{this.ctx.save(),this.ctx.fillStyle="rgba(0, 0, 0, 0.1)",this.ctx.beginPath(),this.ctx.arc(e.x+2,e.y+2,e.radius,0,2*Math.PI),this.ctx.fill();const t=this.fruitImages[e.type];if(t&&t.complete){const s=2.2*e.radius,i=e.x-e.radius,n=e.y-e.radius;this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this.ctx.clip(),this.ctx.drawImage(t,i-(s-2*e.radius)/2,n-(s-2*e.radius)/2,s,s)}else{const s=this.ctx.createRadialGradient(e.x-.3*e.radius,e.y-.3*e.radius,0,e.x,e.y,e.radius);s.addColorStop(0,this.lightenColor(e.color,40)),s.addColorStop(1,e.color),this.ctx.fillStyle=s,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.font=1.2*e.radius+"px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(e.emoji,e.x,e.y)}this.ctx.strokeStyle=e.color,this.ctx.lineWidth=5,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this.ctx.stroke(),e.isNew&&(this.ctx.strokeStyle="#FFD700",this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius+5,0,2*Math.PI),this.ctx.stroke(),e.isNew=!1),e.dangerTime>60&&(this.ctx.strokeStyle="#FF4444",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius+3,0,2*Math.PI),this.ctx.stroke()),this.ctx.restore()}),!this.gameOver&&!this.currentFruit&&(this.ctx.save(),this.ctx.fillStyle="rgba(255, 107, 157, 0.3)",this.ctx.strokeStyle="#FF6B9D",this.ctx.lineWidth=2,this.ctx.setLineDash([5,5]),this.ctx.beginPath(),this.ctx.moveTo(this.dropPosition,0),this.ctx.lineTo(this.dropPosition,this.canvas.height),this.ctx.stroke(),this.ctx.restore())}lightenColor(e,t){const s=parseInt(e.replace("#",""),16),i=Math.round(2.55*t),n=(s>>16)+i,a=(s>>8&255)+i,o=(255&s)+i;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(a<255?a<1?0:a:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)}updateScore(){document.getElementById("score").textContent=this.score,this.score>=5e3&&!this.achievements.includes(1)&&this.addNewAchievement(1),this.score>=1e4&&!this.achievements.includes(2)&&this.addNewAchievement(2),this.score>=5e4&&!this.achievements.includes(3)&&this.addNewAchievement(3),this.score>=75e3&&!this.achievements.includes(4)&&this.addNewAchievement(4),this.score>=1e5&&!this.achievements.includes(5)&&this.addNewAchievement(5),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("suikaHighScore",this.highScore),this.updateHighScore())}updateDiscoveredFruits(){document.querySelector("#fruitChain").innerHTML="";for(let e=0;e<this.fruitsDiscovered;e++){const t=document.createElement("span"),s=this.fruitTypes[e];t.classList.add("preview-fruit"),t.classList.add("inherit"),t.setAttribute("fruit",s.name),document.querySelector("#fruitChain").append(t)}}addNewAchievement(e){this.achievements.push(e),localStorage.setItem("achievements",JSON.stringify(this.achievements)),window.achievementNotification(e),window.setAchievementList(),this.achievements.length>=24&&!this.achievements.includes(25)&&this.addNewAchievement(25)}updateHighScore(){document.getElementById("highScore").textContent=this.highScore}triggerGameOver(){this.gameOver=!0,this.gamesPlayed++,localStorage.setItem("gamesPlayed",this.gamesPlayed),this.showGameOverModal()}showGameOverModal(){const e=document.getElementById("gameOverModal"),t=document.getElementById("finalScore"),s=document.getElementById("newRecord");t.textContent=this.score,s.style.display=this.score>=this.highScore&&this.score>0?"block":"none",e.style.display="block"}hideGameOverModal(){document.getElementById("gameOverModal").style.display="none"}restart(){this.fruits=[],this.currentFruit=null,this.score=0,this.gameOver=!1,this.dropPosition=this.canvas.width/2,this.hammerMode=!1,this.hammerUses=3+Math.floor(this.gamesPlayed/2),this.hammerUses>=5&&!this.achievements.includes(21)&&this.addNewAchievement(21),this.hammerUses>=15&&!this.achievements.includes(22)&&this.addNewAchievement(22),this.hammerUses>=20&&!this.achievements.includes(23)&&this.addNewAchievement(23),this.hammerUses>=25&&!this.achievements.includes(24)&&this.addNewAchievement(24),this.achievements.length>=24&&!this.achievements.includes(25)&&this.addNewAchievement(25);const e=document.getElementById("hammerBtn"),t=document.getElementById("gameCanvas");e.classList.remove("active"),e.classList.remove("disabled"),e.disabled=!1,t.classList.remove("hammer-mode"),this.updateScore(),this.updateHammerButton(),this.generateNextFruit()}gameLoop(){this.gameOver||this.updatePhysics(),this.render(),requestAnimationFrame(()=>this.gameLoop())}}document.addEventListener("DOMContentLoaded",()=>{new SuikaGame});const style=document.createElement("style");style.textContent="\n    .particle {\n        animation: particle-float 1s ease-out forwards;\n    }\n    \n    @keyframes particle-float {\n        0% {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n        }\n        100% {\n            opacity: 0;\n            transform: translateY(-100px) scale(0);\n        }\n    }\n",document.head.appendChild(style);let backgroundMusicState=!0,soundEffetctsState=!0;const notificationArray=[],achievementsList=[{id:1,img:"trophy_1",min:1,description:{EN:"get 5000 points",ES:"consigue 5000 puntos"}},{id:2,img:"trophy_2",min:1,description:{EN:"get 10000 points",ES:"consigue 10000 puntos"}},{id:3,img:"trophy_3",min:1,description:{EN:"get 50000 points",ES:"consigue 50000 puntos"}},{id:4,img:"trophy_4",min:1,description:{EN:"get 75000 points",ES:"consigue 75000 puntos"}},{id:5,img:"apple",min:1,description:{EN:"get 100000 points",ES:"consigue 100000 puntos"}},{id:6,img:"apple",min:1,description:{EN:"Discover 5 fruits",ES:"Descubre 5 frutas"}},{id:7,img:"peach",min:1,description:{EN:"Discover 7 fruits",ES:"Descubre 7 frutas"}},{id:8,img:"melon",min:1,description:{EN:"Discover 9 fruits",ES:"Descubre 9 frutas"}},{id:9,img:"lemon",min:1,description:{EN:"Discover 12 fruits",ES:"Descubre 12 frutas"}},{id:10,img:"avocado",min:1,description:{EN:"Discover all fruits",ES:"Descubre todas las frutas"}},{id:11,img:"hammer",replace:"used",min:1,description:{EN:"destroy 5 fruits",ES:"destruye 5 frutas"}},{id:12,img:"hammer",replace:"used",min:1,description:{EN:"destroy 15 fruits",ES:"destruye 15 frutas"}},{id:13,img:"hammer",replace:"used",min:1,description:{EN:"destroy 25 fruits",ES:"destruye 25 frutas"}},{id:14,img:"hammer",replace:"used",min:1,description:{EN:"destroy 50 fruits",ES:"destruye 50 frutas"}},{id:15,img:"cherry_angry",replace:"cherry",min:1,description:{EN:"destroy 25 cherry",ES:"destruye 25 cerezas"}},{id:16,img:"orange_angry",replace:"orange",min:3,description:{EN:"destroy 15 oranges",ES:"destruye 15 naranjas"}},{id:17,img:"peach_angry",replace:"peach",min:6,description:{EN:"destroy 7 peaches",ES:"destruye 7 melocotones"}},{id:18,img:"pinnapple_angry",replace:"used",min:7,description:{EN:"destroy 5 pineapple",ES:"destruye 5 pi\xf1as"}},{id:19,img:"melon_angry",replace:"melon",min:8,description:{EN:"destroy 3 melons",ES:"destruye 3 melones"}},{id:20,img:"lemon_angry",replace:"lemon",min:11,description:{EN:"destroy 1 lemon",ES:"destruye 1 lim\xf3n"}},{id:21,img:"hammer_1",min:1,description:{EN:"Get 5 hammers",ES:"Consigue 5 martillos"}},{id:22,img:"hammer_2",min:1,description:{EN:"Get 15 hammers",ES:"Consigue 15 martillos"}},{id:23,img:"hammer_3",min:1,description:{EN:"Get 20 hammers",ES:"Consigue 20 martillos"}},{id:24,img:"hammer_4",min:1,description:{EN:"Get 25 hammers",ES:"Consigue 25 martillos"}},{id:25,img:"trophy_5",min:1,description:{EN:"Get all achievements",ES:"Consigue todos los logros"}}],translations={EN:{newGame:"New game",score:"Score: ",best:"Record: ",settings:"Settings",achievements:"Achievements",music:"Music",soundEffects:"Sound effects",close:"close",language:"language",gameOver:"Game over!",finalScore:"final score: ",newRecord:"\u{1f389} New High Score! \u{1f389}",playAgain:"Play again"},ES:{newGame:"Nueva partida",score:"Puntos: ",best:"Record: ",settings:"Ajustes",achievements:"Logros",music:"M\xfasica",soundEffects:"Efectos de sonido",close:"Cerrar",language:"idioma",gameOver:"\xa1Partida terminada!",finalScore:"Puntuaci\xf3n final: ",newRecord:"\u{1f389} Nuevo r\xe9cord! \u{1f389}",playAgain:"Jugar de nuevo"}},showSettingsModal=()=>{document.getElementById("settingsModal").style.display="block"},hideSettingsModal=()=>{document.getElementById("settingsModal").style.display="none"};document.getElementById("settingsBtn").addEventListener("click",()=>{showSettingsModal()}),document.getElementById("closeSettingsModalBtn").addEventListener("click",()=>{hideSettingsModal()}),document.getElementById("backgroundMusicSwitch").addEventListener("change",c=>{backgroundMusicState=c.currentTarget.checked,localStorage.setItem("backgroundMusic",backgroundMusicState),updateBackgroundMusic()}),document.getElementById("soundEffectsSwitch").addEventListener("change",c=>{soundEffetctsState=c.currentTarget.checked,localStorage.setItem("soundEffects",backgroundMusicState)}),document.getElementById("settingsTab").addEventListener("click",()=>{document.getElementById("settingsTab").classList.add("active"),document.getElementById("settingsContainer").classList.remove("d-none"),document.getElementById("achievementsTab").classList.remove("active"),document.getElementById("achievementsContainer").classList.add("d-none")}),document.getElementById("achievementsTab").addEventListener("click",()=>{document.getElementById("settingsTab").classList.remove("active"),document.getElementById("settingsContainer").classList.add("d-none"),document.getElementById("achievementsTab").classList.add("active"),document.getElementById("achievementsContainer").classList.remove("d-none")}),document.getElementById("langaugeSelect").addEventListener("change",({target:c})=>{localStorage.setItem("language",c.value),updateTranslations()});const setCurrentValues=()=>{backgroundMusicState=!localStorage.getItem("backgroundMusic")||"true"===localStorage.getItem("backgroundMusic"),soundEffetctsState=!localStorage.getItem("soundEffects")||"true"===localStorage.getItem("soundEffects"),document.getElementById("backgroundMusicSwitch").checked=backgroundMusicState,document.getElementById("soundEffectsSwitch").checked=soundEffetctsState,setTimeout(()=>{updateBackgroundMusic()},250)},updateTranslations=()=>{const c=localStorage.getItem("language")||"EN";document.getElementById("langaugeSelect").value=c,Object.entries(translations[c]).forEach(([t,s])=>{const i=document.getElementById(`${t}Text`);i&&(i.innerHTML=s)}),setAchievementList()};window.setAchievementList=()=>{document.getElementById("achievementsContainer").innerHTML="";const c=localStorage.getItem("language")||"EN",e=localStorage.getItem("achievements")?JSON.parse(localStorage.getItem("achievements")):[],t=Number(localStorage.getItem("fruitsDiscovered"))||4,s=localStorage.getItem("achievementsCounter")?JSON.parse(localStorage.getItem("achievementsCounter")):{used:0,cherry:0,orange:0,peach:0,pinnapple:0,melon:0,lemon:0};achievementsList.forEach(i=>{const o=`\n        <img src="assets/${i.img}.png" class="achievement-img">\n        <img src="assets/locked.png" class="locked-img">\n        <div>${i.min<t?`${i.description[c]}${i.replace?` (${s[i.replace]})`:""}`:"Unlock this fruit to see the achievement"}</div>\n    `,r=document.createElement("div");r.classList.add("achievement-item"),e.includes(i.id)&&r.classList.add("unlocked"),r.setAttribute("id",`achievement-${i.id}`),r.innerHTML=o,document.getElementById("achievementsContainer").append(r)})};const updateBackgroundMusic=()=>{const c=document.getElementById("backgroundMusic");backgroundMusicState?c.play():(c.pause(),c.currentTime=0)};window.achievementNotification=c=>{const e=localStorage.getItem("language")||"EN";c&&notificationArray.push(c);const t=document.getElementById("snackbar");if(!t.classList.contains("show")){const s=notificationArray.pop(),i=achievementsList.find(n=>n.id==s);t.innerHTML=`\n    <img src="assets/${i.img}.png">\n    <span>${i.description[e]}</span>\n    `,t.classList.add("show"),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{notificationArray.length>0&&window.achievementNotification()},800)},2e3)}},setCurrentValues(),updateTranslations(),window.setAchievementList();